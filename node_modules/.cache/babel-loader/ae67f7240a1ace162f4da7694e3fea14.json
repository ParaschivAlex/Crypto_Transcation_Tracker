{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Asus/Desktop/FACULTATE/AN 3/React Angular/proiect-fe2/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Asus/Desktop/FACULTATE/AN 3/React Angular/proiect-fe2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Asus/Desktop/FACULTATE/AN 3/React Angular/proiect-fe2/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import{prjAuth}from'../firebase/configfirebase';import{useAuthContext}from'./useAuthContext';export var useLogin=function useLogin(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isCancelled=_useState2[0],setIsCancelled=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isPending=_useState6[0],setIsPending=_useState6[1];var _useAuthContext=useAuthContext(),dispatch=_useAuthContext.dispatch;var login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,password){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setError(null);setIsPending(true);_context.prev=2;_context.next=5;return prjAuth.signInWithEmailAndPassword(email,password);case 5:res=_context.sent;dispatch({type:'LOGIN',payload:res.user});if(!isCancelled){setIsPending(false);setError(null);}_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);if(!isCancelled){setError(_context.t0.message);setIsPending(false);}case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function login(_x,_x2){return _ref.apply(this,arguments);};}();useEffect(function(){return function(){return setIsCancelled(true);};},[]);return{login:login,isPending:isPending,error:error};};","map":{"version":3,"sources":["C:/Users/Asus/Desktop/FACULTATE/AN 3/React Angular/proiect-fe2/src/hooks/useLogin.tsx"],"names":["useState","useEffect","prjAuth","useAuthContext","useLogin","isCancelled","setIsCancelled","error","setError","isPending","setIsPending","dispatch","login","email","password","signInWithEmailAndPassword","res","type","payload","user","message"],"mappings":"gbAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,OAAT,KAAwB,4BAAxB,CACA,OAASC,cAAT,KAA+B,kBAA/B,CAEA,MAAO,IAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CAC5B,cAAsCJ,QAAQ,CAAC,KAAD,CAA9C,wCAAOK,WAAP,eAAoBC,cAApB,eACA,eAA0BN,QAAQ,CAAC,IAAD,CAAlC,yCAAOO,KAAP,eAAcC,QAAd,eACA,eAAkCR,QAAQ,CAAC,KAAD,CAA1C,yCAAOS,SAAP,eAAkBC,YAAlB,eACA,oBAA0BP,cAAc,EAAxC,CAAQQ,QAAR,iBAAQA,QAAR,CAEA,GAAMC,CAAAA,KAAK,0FAAG,iBAAOC,KAAP,CAAmBC,QAAnB,0HACZN,QAAQ,CAAC,IAAD,CAAR,CACAE,YAAY,CAAC,IAAD,CAAZ,CAFY,sCAMQR,CAAAA,OAAO,CAACa,0BAAR,CAAmCF,KAAnC,CAA0CC,QAA1C,CANR,QAMJE,GANI,eAQVL,QAAQ,CAAC,CAAEM,IAAI,CAAE,OAAR,CAAiBC,OAAO,CAAEF,GAAG,CAACG,IAA9B,CAAD,CAAR,CAEA,GAAI,CAACd,WAAL,CAAkB,CAChBK,YAAY,CAAC,KAAD,CAAZ,CACAF,QAAQ,CAAC,IAAD,CAAR,CACD,CAbS,iFAgBV,GAAI,CAACH,WAAL,CAAkB,CAChBG,QAAQ,CAAC,YAAIY,OAAL,CAAR,CACAV,YAAY,CAAC,KAAD,CAAZ,CACD,CAnBS,qEAAH,kBAALE,CAAAA,KAAK,gDAAX,CAuBAX,SAAS,CAAC,UAAM,CACd,MAAO,kBAAMK,CAAAA,cAAc,CAAC,IAAD,CAApB,EAAP,CACD,CAFQ,CAEN,EAFM,CAAT,CAIA,MAAO,CAAEM,KAAK,CAALA,KAAF,CAASH,SAAS,CAATA,SAAT,CAAoBF,KAAK,CAALA,KAApB,CAAP,CACD,CAlCM","sourcesContent":["import { useState, useEffect } from 'react'\r\nimport { prjAuth } from '../firebase/configfirebase' \r\nimport { useAuthContext } from './useAuthContext'\r\n\r\nexport const useLogin = () => {\r\n  const [isCancelled, setIsCancelled] = useState(false)\r\n  const [error, setError] = useState(null)\r\n  const [isPending, setIsPending] = useState(false)\r\n  const { dispatch }: any = useAuthContext()\r\n\r\n  const login = async (email: any, password: any) => {\r\n    setError(null)\r\n    setIsPending(true)\r\n  \r\n    try {\r\n      // login\r\n      const res = await prjAuth.signInWithEmailAndPassword(email, password)\r\n\r\n      dispatch({ type: 'LOGIN', payload: res.user })\r\n\r\n      if (!isCancelled) {\r\n        setIsPending(false)\r\n        setError(null)\r\n      }\r\n    } \r\n    catch(err) {\r\n      if (!isCancelled) {\r\n        setError(err.message)\r\n        setIsPending(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    return () => setIsCancelled(true)\r\n  }, [])\r\n\r\n  return { login, isPending, error }\r\n}"]},"metadata":{},"sourceType":"module"}