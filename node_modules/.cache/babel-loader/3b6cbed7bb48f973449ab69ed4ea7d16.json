{"ast":null,"code":"import _slicedToArray from\"C:/Users/Asus/Desktop/FACULTATE/AN 3/React Angular/proiect-fe2/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"C:/Users/Asus/Desktop/FACULTATE/AN 3/React Angular/proiect-fe2/node_modules/@babel/runtime/helpers/esm/objectSpread2\";//https://kentcdodds.com/blog/how-to-use-react-context-effectively\nimport{createContext,useReducer,useEffect}from'react';//import * as React from 'react'\nimport{prjAuth}from'../firebase/configfirebase';import{jsx as _jsx}from\"react/jsx-runtime\";export var AuthContext=/*#__PURE__*/createContext('');//export const AuthContext = React.createContext()\nexport var authReducer=function authReducer(state,action){switch(action.type){case'LOGIN':return _objectSpread(_objectSpread({},state),{},{user:action.payload});case'LOGOUT':return _objectSpread(_objectSpread({},state),{},{user:null});case'ALREADY_LOGGED':return _objectSpread(_objectSpread({},state),{},{user:action.payload,alreadyLogged:true});default:return state;}};export var AuthContextProvider=function AuthContextProvider(_ref){var children=_ref.children;var _useReducer=useReducer(authReducer,{user:null,alreadyLogged:false}),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];useEffect(function(){var unsub=prjAuth.onAuthStateChanged(function(user){dispatch({type:'ALREADY_LOGGED',payload:user});unsub();});},[]);console.log('AuthContext state:',state);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:_objectSpread(_objectSpread({},state),{},{dispatch:dispatch}),children:children});};","map":{"version":3,"sources":["C:/Users/Asus/Desktop/FACULTATE/AN 3/React Angular/proiect-fe2/src/context/AuthContext.tsx"],"names":["createContext","useReducer","useEffect","prjAuth","AuthContext","authReducer","state","action","type","user","payload","alreadyLogged","AuthContextProvider","children","dispatch","unsub","onAuthStateChanged","console","log"],"mappings":"iSAAA;AACA,OAASA,aAAT,CAAwBC,UAAxB,CAAoCC,SAApC,KAAqD,OAArD,CACA;AACA,OAASC,OAAT,KAAwB,4BAAxB,C,2CACA,MAAO,IAAMC,CAAAA,WAAW,cAAGJ,aAAa,CAAC,EAAD,CAAjC,CACP;AAEA,MAAO,IAAMK,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAaC,MAAb,CAA6B,CACtD,OAAQA,MAAM,CAACC,IAAf,EACM,IAAK,OAAL,CACI,sCAAYF,KAAZ,MAAmBG,IAAI,CAAEF,MAAM,CAACG,OAAhC,GACJ,IAAK,QAAL,CACI,sCAAYJ,KAAZ,MAAmBG,IAAI,CAAE,IAAzB,GACJ,IAAK,gBAAL,CACI,sCAAYH,KAAZ,MAAmBG,IAAI,CAAEF,MAAM,CAACG,OAAhC,CAAyCC,aAAa,CAAE,IAAxD,GACJ,QACI,MAAOL,CAAAA,KAAP,CARV,CAUD,CAXM,CAaP,MAAO,IAAMM,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,MAAuB,IAApBC,CAAAA,QAAoB,MAApBA,QAAoB,CACxD,gBAA0BZ,UAAU,CAACI,WAAD,CAAc,CAChDI,IAAI,CAAE,IAD0C,CAEhDE,aAAa,CAAE,KAFiC,CAAd,CAApC,4CAAOL,KAAP,iBAAcQ,QAAd,iBAKAZ,SAAS,CAAC,UAAM,CACd,GAAMa,CAAAA,KAAK,CAAGZ,OAAO,CAACa,kBAAR,CAA2B,SAAAP,IAAI,CAAI,CAC/CK,QAAQ,CAAC,CAAEN,IAAI,CAAE,gBAAR,CAA0BE,OAAO,CAAED,IAAnC,CAAD,CAAR,CACAM,KAAK,GACN,CAHa,CAAd,CAID,CALQ,CAKN,EALM,CAAT,CAOAE,OAAO,CAACC,GAAR,CAAY,oBAAZ,CAAkCZ,KAAlC,EAEA,mBACE,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,gCAAOA,KAAP,MAAcQ,QAAQ,CAARA,QAAd,EAA3B,UACID,QADJ,EADF,CAMD,CArBM","sourcesContent":["//https://kentcdodds.com/blog/how-to-use-react-context-effectively\r\nimport { createContext, useReducer, useEffect } from 'react'\r\n//import * as React from 'react'\r\nimport { prjAuth } from '../firebase/configfirebase'\r\nexport const AuthContext = createContext('')\r\n//export const AuthContext = React.createContext()\r\n\r\nexport const authReducer = (state: any, action: any) => {\r\n  switch (action.type) {\r\n        case 'LOGIN':\r\n            return { ...state, user: action.payload }\r\n        case 'LOGOUT':\r\n            return { ...state, user: null }\r\n        case 'ALREADY_LOGGED':\r\n            return { ...state, user: action.payload, alreadyLogged: true }\r\n        default:\r\n            return state\r\n  }\r\n}\r\n\r\nexport const AuthContextProvider = ({ children }: any) => {\r\n  const [state, dispatch] = useReducer(authReducer, { \r\n    user: null,\r\n    alreadyLogged: false\r\n  })\r\n  \r\n  useEffect(() => {\r\n    const unsub = prjAuth.onAuthStateChanged(user => {\r\n      dispatch({ type: 'ALREADY_LOGGED', payload: user })\r\n      unsub()\r\n    })\r\n  }, [])\r\n\r\n  console.log('AuthContext state:', state)\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ ...state, dispatch }}>\r\n      { children }\r\n    </AuthContext.Provider>\r\n  )\r\n\r\n}"]},"metadata":{},"sourceType":"module"}