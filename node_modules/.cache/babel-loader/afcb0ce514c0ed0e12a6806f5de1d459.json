{"ast":null,"code":"var _s = $RefreshSig$();\n\n//import { isPending } from \"@reduxjs/toolkit\"\nimport { useState, useEffect } from \"react\";\nimport { prjAuth } from \"../firebase/configfirebase\";\nimport { useAuthContext } from \"./useAuthContext\";\nexport const useSignup = () => {\n  _s();\n\n  const [error, setError] = useState(null);\n  const [isPending, setIsPending] = useState(false);\n  const {\n    dispatch\n  } = useAuthContext();\n  const [isCancelled, setIsCancelled] = useState(false);\n\n  const signup = async (email, password, displayName) => {\n    setError(null);\n    setIsPending(true);\n\n    try {\n      //signup\n      const res = await prjAuth.createUserWithEmailAndPassword(email, password);\n\n      if (!res) {\n        throw new Error('Signup Failed');\n      } //adaug numele la user\n\n\n      await res.user.updateProfile({\n        displayName\n      });\n      dispatch({\n        type: 'LOGIN',\n        payload: res.user\n      });\n\n      if (!isCancelled) {\n        setIsPending(false);\n        setError(null);\n      }\n    } catch (err) {\n      if (!isCancelled) {\n        console.log(err.message);\n        setError(err.message);\n        setIsPending(false);\n      }\n    }\n  };\n\n  useEffect(() => {\n    return () => setIsCancelled(true);\n  }, []);\n  return {\n    error,\n    isPending,\n    signup\n  };\n};\n\n_s(useSignup, \"8CHKXc6l6Bzni66ZcuWKskfV66Q=\", false, function () {\n  return [useAuthContext];\n});","map":{"version":3,"sources":["C:/Users/Asus/Desktop/FACULTATE/AN 3/React Angular/proiect-fe2/src/hooks/useSignup.tsx"],"names":["useState","useEffect","prjAuth","useAuthContext","useSignup","error","setError","isPending","setIsPending","dispatch","isCancelled","setIsCancelled","signup","email","password","displayName","res","createUserWithEmailAndPassword","Error","user","updateProfile","type","payload","err","console","log","message"],"mappings":";;AAAA;AACA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,OAAT,QAAwB,4BAAxB;AACA,SAASC,cAAT,QAA+B,kBAA/B;AAEA,OAAO,MAAMC,SAAS,GAAG,MAAM;AAAA;;AAC3B,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBN,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACO,SAAD,EAAYC,YAAZ,IAA4BR,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM;AAAES,IAAAA;AAAF,MAAoBN,cAAc,EAAxC;AACA,QAAM,CAACO,WAAD,EAAcC,cAAd,IAAgCX,QAAQ,CAAC,KAAD,CAA9C;;AAEA,QAAMY,MAAM,GAAG,OAAOC,KAAP,EAAmBC,QAAnB,EAAkCC,WAAlC,KAAuD;AAClET,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACAE,IAAAA,YAAY,CAAC,IAAD,CAAZ;;AAEA,QAAG;AACC;AACA,YAAMQ,GAAG,GAAG,MAAMd,OAAO,CAACe,8BAAR,CAAuCJ,KAAvC,EAA8CC,QAA9C,CAAlB;;AAEA,UAAG,CAACE,GAAJ,EAAQ;AACJ,cAAM,IAAIE,KAAJ,CAAU,eAAV,CAAN;AACH,OANF,CAQC;;;AACA,YAAMF,GAAG,CAACG,IAAJ,CAASC,aAAT,CAAuB;AAACL,QAAAA;AAAD,OAAvB,CAAN;AAEAN,MAAAA,QAAQ,CAAC;AAAEY,QAAAA,IAAI,EAAE,OAAR;AAAiBC,QAAAA,OAAO,EAAEN,GAAG,CAACG;AAA9B,OAAD,CAAR;;AAEA,UAAI,CAACT,WAAL,EAAiB;AACjBF,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACAF,QAAAA,QAAQ,CAAC,IAAD,CAAR;AACC;AACJ,KAjBD,CAkBA,OAAMiB,GAAN,EAAU;AACN,UAAI,CAACb,WAAL,EAAiB;AACbc,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,OAAhB;AACApB,QAAAA,QAAQ,CAACiB,GAAG,CAACG,OAAL,CAAR;AACAlB,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACH;AACJ;AACJ,GA7BD;;AA+BAP,EAAAA,SAAS,CAAC,MAAM;AACZ,WAAO,MAAMU,cAAc,CAAC,IAAD,CAA3B;AACD,GAFM,EAEJ,EAFI,CAAT;AAIA,SAAO;AAAEN,IAAAA,KAAF;AAASE,IAAAA,SAAT;AAAoBK,IAAAA;AAApB,GAAP;AACH,CA1CM;;GAAMR,S;UAGiBD,c","sourcesContent":["//import { isPending } from \"@reduxjs/toolkit\"\r\nimport { useState, useEffect } from \"react\"\r\nimport { prjAuth } from \"../firebase/configfirebase\"\r\nimport { useAuthContext } from \"./useAuthContext\"\r\n\r\nexport const useSignup = () => {\r\n    const [error, setError] = useState(null)\r\n    const [isPending, setIsPending] = useState(false)\r\n    const { dispatch } :any = useAuthContext()\r\n    const [isCancelled, setIsCancelled] = useState(false)\r\n\r\n    const signup = async (email: any, password: any, displayName: any) => {\r\n        setError(null)\r\n        setIsPending(true)\r\n\r\n        try{\r\n            //signup\r\n            const res = await prjAuth.createUserWithEmailAndPassword(email, password)\r\n\r\n            if(!res){\r\n                throw new Error('Signup Failed')\r\n            }\r\n\r\n            //adaug numele la user\r\n            await res.user.updateProfile({displayName})\r\n\r\n            dispatch({ type: 'LOGIN', payload: res.user})\r\n\r\n            if (!isCancelled){\r\n            setIsPending(false)\r\n            setError(null)\r\n            }\r\n        }\r\n        catch(err){\r\n            if (!isCancelled){\r\n                console.log(err.message)\r\n                setError(err.message)\r\n                setIsPending(false)\r\n            }\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        return () => setIsCancelled(true)\r\n      }, [])\r\n\r\n    return { error, isPending, signup}\r\n}"]},"metadata":{},"sourceType":"module"}