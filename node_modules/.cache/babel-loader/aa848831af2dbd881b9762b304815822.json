{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Asus/Desktop/FACULTATE/AN 3/React Angular/proiect-fe2/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Asus/Desktop/FACULTATE/AN 3/React Angular/proiect-fe2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Asus/Desktop/FACULTATE/AN 3/React Angular/proiect-fe2/node_modules/@babel/runtime/helpers/esm/slicedToArray\";//import { isPending } from \"@reduxjs/toolkit\"\nimport{useState,useEffect}from\"react\";import{prjAuth}from\"../firebase/configfirebase\";import{useAuthContext}from\"./useAuthContext\";export var useSignup=function useSignup(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isPending=_useState4[0],setIsPending=_useState4[1];var _useAuthContext=useAuthContext(),dispatch=_useAuthContext.dispatch;var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isCancelled=_useState6[0],setIsCancelled=_useState6[1];var signup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(email,password,displayName){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setError(null);setIsPending(true);_context.prev=2;_context.next=5;return prjAuth.createUserWithEmailAndPassword(email,password);case 5:res=_context.sent;if(res){_context.next=8;break;}throw new Error('Signup Failed');case 8:_context.next=10;return res.user.updateProfile({displayName:displayName});case 10:dispatch({type:'LOGIN',payload:res.user});if(!isCancelled){setIsPending(false);setError(null);}_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](2);if(!isCancelled){console.log(_context.t0.message);setError(_context.t0.message);setIsPending(false);}case 17:case\"end\":return _context.stop();}}},_callee,null,[[2,14]]);}));return function signup(_x,_x2,_x3){return _ref.apply(this,arguments);};}();useEffect(function(){return function(){return setIsCancelled(true);};},[]);return{error:error,isPending:isPending,signup:signup};};","map":{"version":3,"sources":["C:/Users/Asus/Desktop/FACULTATE/AN 3/React Angular/proiect-fe2/src/hooks/useSignup.tsx"],"names":["useState","useEffect","prjAuth","useAuthContext","useSignup","error","setError","isPending","setIsPending","dispatch","isCancelled","setIsCancelled","signup","email","password","displayName","createUserWithEmailAndPassword","res","Error","user","updateProfile","type","payload","console","log","message"],"mappings":"gbAAA;AACA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,OAAT,KAAwB,4BAAxB,CACA,OAASC,cAAT,KAA+B,kBAA/B,CAEA,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CAC3B,cAA0BJ,QAAQ,CAAC,IAAD,CAAlC,wCAAOK,KAAP,eAAcC,QAAd,eACA,eAAkCN,QAAQ,CAAC,KAAD,CAA1C,yCAAOO,SAAP,eAAkBC,YAAlB,eACA,oBAA0BL,cAAc,EAAxC,CAAQM,QAAR,iBAAQA,QAAR,CACA,eAAsCT,QAAQ,CAAC,KAAD,CAA9C,yCAAOU,WAAP,eAAoBC,cAApB,eAEA,GAAMC,CAAAA,MAAM,0FAAG,iBAAOC,KAAP,CAAmBC,QAAnB,CAAkCC,WAAlC,0HACXT,QAAQ,CAAC,IAAD,CAAR,CACAE,YAAY,CAAC,IAAD,CAAZ,CAFW,sCAMWN,CAAAA,OAAO,CAACc,8BAAR,CAAuCH,KAAvC,CAA8CC,QAA9C,CANX,QAMDG,GANC,kBAQHA,GARG,8BASG,IAAIC,CAAAA,KAAJ,CAAU,eAAV,CATH,+BAaDD,CAAAA,GAAG,CAACE,IAAJ,CAASC,aAAT,CAAuB,CAACL,WAAW,CAAXA,WAAD,CAAvB,CAbC,SAePN,QAAQ,CAAC,CAAEY,IAAI,CAAE,OAAR,CAAiBC,OAAO,CAAEL,GAAG,CAACE,IAA9B,CAAD,CAAR,CAEA,GAAI,CAACT,WAAL,CAAiB,CACjBF,YAAY,CAAC,KAAD,CAAZ,CACAF,QAAQ,CAAC,IAAD,CAAR,CACC,CApBM,iFAuBP,GAAI,CAACI,WAAL,CAAiB,CACba,OAAO,CAACC,GAAR,CAAY,YAAIC,OAAhB,EACAnB,QAAQ,CAAC,YAAImB,OAAL,CAAR,CACAjB,YAAY,CAAC,KAAD,CAAZ,CACH,CA3BM,qEAAH,kBAANI,CAAAA,MAAM,oDAAZ,CA+BAX,SAAS,CAAC,UAAM,CACZ,MAAO,kBAAMU,CAAAA,cAAc,CAAC,IAAD,CAApB,EAAP,CACD,CAFM,CAEJ,EAFI,CAAT,CAIA,MAAO,CAAEN,KAAK,CAALA,KAAF,CAASE,SAAS,CAATA,SAAT,CAAoBK,MAAM,CAANA,MAApB,CAAP,CACH,CA1CM","sourcesContent":["//import { isPending } from \"@reduxjs/toolkit\"\r\nimport { useState, useEffect } from \"react\"\r\nimport { prjAuth } from \"../firebase/configfirebase\"\r\nimport { useAuthContext } from \"./useAuthContext\"\r\n\r\nexport const useSignup = () => {\r\n    const [error, setError] = useState(null)\r\n    const [isPending, setIsPending] = useState(false)\r\n    const { dispatch } :any = useAuthContext()\r\n    const [isCancelled, setIsCancelled] = useState(false)\r\n\r\n    const signup = async (email: any, password: any, displayName: any) => {\r\n        setError(null)\r\n        setIsPending(true)\r\n\r\n        try{\r\n            //signup\r\n            const res = await prjAuth.createUserWithEmailAndPassword(email, password)\r\n\r\n            if(!res){\r\n                throw new Error('Signup Failed')\r\n            }\r\n\r\n            //adaug numele la user\r\n            await res.user.updateProfile({displayName})\r\n\r\n            dispatch({ type: 'LOGIN', payload: res.user})\r\n\r\n            if (!isCancelled){\r\n            setIsPending(false)\r\n            setError(null)\r\n            }\r\n        }\r\n        catch(err){\r\n            if (!isCancelled){\r\n                console.log(err.message)\r\n                setError(err.message)\r\n                setIsPending(false)\r\n            }\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        return () => setIsCancelled(true)\r\n      }, [])\r\n\r\n    return { error, isPending, signup}\r\n}"]},"metadata":{},"sourceType":"module"}